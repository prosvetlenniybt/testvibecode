<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–°—Ç–∞–Ω–¥–∞—Ä—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #000000;
      --bg-card: #05070b;
      --bg-section: #111318;
      --bg-chip: #050910;
      --accent: #0f8bff;
      --accent-soft: #0b3a84;
      --accent-bar: #0098ff;
      --text-primary: #ffffff;
      --text-secondary: #9ca3af;
      --text-muted: #6b7280;
      --border-soft: #1f2933;
      --divider: #171923;
      --danger: #facc15;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0b1014;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui,
        sans-serif;
      color: var(--text-primary);
    }

    .phone {
      width: 390px;
      max-width: 100%;
      background: var(--bg-main);
      border-radius: 28px;
      padding: 14px 10px 24px;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.9);
      overflow: hidden;
      position: relative;
    }

    .screen {
      border-radius: 22px;
      background: radial-gradient(circle at 50% -40%, #1a2a40 0, #020308 52%);
      padding: 16px 14px 24px;
      position: relative;
      overflow: hidden;
    }

    .header {
      display: flex;
      align-items: center;
      margin-bottom: 18px;
    }

    .back-btn {
      font-size: 20px;
      margin-right: 10px;
      cursor: default;
    }

    .header-title {
      font-size: 20px;
      font-weight: 600;
    }

    .chip-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 26px;
      margin-top: 10px;
    }

    .chip {
      flex: 1;
      border-radius: 22px;
      padding: 8px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid #1e293b;
      background: var(--bg-chip);
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      user-select: none;
      transition: background 0.15s, border-color 0.15s, color 0.15s;
    }

    .chip--active {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(15, 139, 255, 0.1);
      background: radial-gradient(circle at 50% -20%, #1a3e70, #060812);
      color: var(--text-primary);
      font-weight: 500;
    }

    .graph-wrapper {
      margin-bottom: 16px;
    }

    .graph-wrapper.hidden {
      display: none;
    }

    .graph {
      width: 100%;
      height: 190px;
      position: relative;
    }

    .graph svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    .graph-marker {
      position: absolute;
      bottom: 0;
      transform: translateX(-50%);
      font-size: 18px;
      pointer-events: none;
      display: none;
    }

    .graph-marker--person {
      font-size: 19px;
    }

    .graph-marker--flag {
      font-size: 20px;
    }

    .graph-axis {
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--text-muted);
      padding: 0 8px;
    }

    .strength-stat {
      margin-top: 14px;
      margin-bottom: 18px;
    }

    .strength-stat-title {
      font-size: 15px;
      line-height: 1.3;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .strength-stat-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .divider {
      height: 1px;
      background: var(--divider);
      margin: 10px 0 18px;
    }

    .goal-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .goal-label {
      color: var(--text-secondary);
    }

    .goal-value {
      font-size: 14px;
      cursor: pointer;
    }

    .goal-value span {
      font-size: 11px;
      color: var(--text-secondary);
      margin-left: 3px;
    }

    .goal-bar {
      width: 100%;
      height: 28px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #1f2937;
      padding: 2px;
      overflow: hidden;
      cursor: pointer;
    }

    .goal-bar-inner {
      width: 0%;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #0071ff, #00a7ff);
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 8px;
      position: relative;
      transition: width 0.25s ease-out;
    }

    .goal-bar-label {
      font-size: 12px;
      font-weight: 600;
      margin-right: 4px;
      display: none;
    }

    .goal-bar-flag {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: rgba(15, 23, 42, 0.6);
      display: none;
    }

    .section-lower {
      margin-top: 26px;
      margin-left: -14px;
      margin-right: -14px;
      background: #111216;
      padding: 26px 18px 8px;
    }

    .section-title {
      font-size: 24px;
      line-height: 1.25;
      font-weight: 700;
      margin-bottom: 22px;
    }

    .level-card {
      margin-top: 4px;
    }

    .level-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .level-name {
      font-size: 14px;
      font-weight: 600;
    }

    .level-name span {
      font-weight: 400;
      color: var(--text-secondary);
    }

    .level-stars {
      font-size: 14px;
      letter-spacing: 1px;
    }

    .level-stars span:first-child {
      color: var(--danger);
    }

    .level-stars span:not(:first-child) {
      color: #4b5563;
    }

    .level-text {
      margin-top: 8px;
      font-size: 12px;
      line-height: 1.5;
      color: var(--text-secondary);
    }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .modal-backdrop.hidden {
      display: none;
    }

    .modal {
      width: 82%;
      max-width: 320px;
      background: #050810;
      border-radius: 18px;
      border: 1px solid #1e293b;
      padding: 16px 16px 14px;
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.8);
    }

    .modal-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .modal-description {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .modal-input-wrapper {
      margin-bottom: 14px;
    }

    .modal-input {
      width: 100%;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text-primary);
      font-size: 14px;
      outline: none;
    }

    .modal-input:focus {
      border-color: var(--accent);
    }

    .modal-sex-row {
      display: flex;
      gap: 8px;
      margin-bottom: 14px;
    }

    .modal-sex-btn {
      flex: 1;
      padding: 8px 0;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #020617;
      color: var(--text-secondary);
      font-size: 14px;
      cursor: pointer;
    }

    .modal-sex-btn--active {
      border-color: var(--accent);
      background: radial-gradient(circle at 50% -20%, #1a3e70, #020617);
      color: var(--text-primary);
      font-weight: 500;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-secondary);
    }

    .btn-primary {
      background: var(--accent);
      color: #ffffff;
    }

    @media (max-width: 420px) {
      .phone {
        width: 100%;
        height: 100vh;
        border-radius: 0;
        box-shadow: none;
      }

      .screen {
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="phone">
    <div class="screen">
      <div class="header">
        <div class="back-btn">‚Üê</div>
        <div class="header-title">–°—Ç–∞–Ω–¥–∞—Ä—Ç —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</div>
      </div>

      <div class="chip-row">
        <div class="chip" id="chip-sex">–ü–æ–ª</div>
        <div class="chip" id="chip-age">–í–æ–∑—Ä–∞—Å—Ç</div>
        <div class="chip" id="chip-weight">–í–µ—Å —Ç–µ–ª–∞</div>
      </div>

      <div class="graph-wrapper hidden" id="graph-wrapper">
        <div class="graph" id="graph">
          <svg viewBox="0 0 360 190" preserveAspectRatio="none">
            <defs>
              <linearGradient id="graphFill" x1="0" x2="0" y1="0" y2="1">
                <stop offset="0%" stop-color="#007bff" stop-opacity="0.75" />
                <stop offset="70%" stop-color="#003366" stop-opacity="0.25" />
                <stop offset="100%" stop-color="#000000" stop-opacity="0" />
              </linearGradient>
            </defs>
            <path
              d="M10 150
                 Q 60 70 120 80
                 T 210 70
                 T 350 145
                 L 350 180
                 L 10 180 Z"
              fill="url(#graphFill)"
            />
            <path
              d="M10 150
                 Q 60 70 120 80
                 T 210 70
                 T 350 145"
              fill="none"
              stroke="#1ea0ff"
              stroke-width="2.2"
            />
          </svg>

          <div class="graph-marker graph-marker--person" id="marker-person">üë§</div>
          <div class="graph-marker graph-marker--flag" id="marker-flag">üèÅ</div>
        </div>

        <div class="graph-axis">
          <span>30</span>
          <span>60</span>
          <span>90</span>
          <span>120</span>
          <span>150</span>
          <span>180</span>
        </div>
      </div>

      <div class="strength-stat">
        <div class="strength-stat-title">
          –í—ã –ø–æ–¥–Ω–∏–º–∞–µ—Ç–µ –±–æ–ª—å—à–µ, —á–µ–º 41,2%<br />
          –∞—Ç–ª–µ—Ç–æ–≤
        </div>
        <div class="strength-stat-subtitle">
          –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏ –≤–µ—Å–∞
        </div>
      </div>

      <div class="divider"></div>

      <div class="goal-row">
        <div class="goal-label">–¶–µ–ª—å (–ú–∞–∫—Å. –≤–µ—Å)</div>
        <div class="goal-value" id="goal-value">--<span>kg</span></div>
      </div>

      <div class="goal-bar" id="goal-bar">
        <div class="goal-bar-inner" id="goal-bar-inner">
          <div class="goal-bar-label" id="goal-bar-label">--kg</div>
          <div class="goal-bar-flag" id="goal-bar-flag">üèÅ</div>
        </div>
      </div>

      <div class="section-lower">
        <div class="section-title">
          –ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç<br />
          —É—Ä–æ–≤–Ω–∏ —Å–∏–ª—ã?
        </div>

        <div class="level-card">
          <div class="level-header">
            <div class="level-name">
              –ù–∞—á–∏–Ω–∞—é—â–∏–π <span>(57,5 –∫–≥)</span>
            </div>
            <div class="level-stars">
              <span>‚òÖ</span><span>‚òÖ</span><span>‚òÖ</span><span>‚òÖ</span><span>‚òÖ</span>
            </div>
          </div>
          <div class="level-text">
            –°–∏–ª—å–Ω–µ–µ, —á–µ–º 5% –ø–æ–¥–Ω–∏–º–∞—é—â–∏—Ö –≤–µ—Å–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ –∏ –≤–µ—Å–µ.
            –ù–æ–≤–∏—á–æ–∫ –æ–±—ã—á–Ω–æ —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç—Å—è –ø–æ –º–µ–Ω—å—à–µ–π –º–µ—Ä–µ –º–µ—Å—è—Ü –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å
            –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal-backdrop hidden" id="modal-backdrop">
      <div class="modal" id="modal">
        <div class="modal-title" id="modal-title"></div>
        <div class="modal-description" id="modal-description"></div>

        <div class="modal-sex-row" id="modal-sex-row" style="display:none;">
          <button class="modal-sex-btn" data-sex="male" id="btn-sex-male">–ú—É–∂.</button>
          <button class="modal-sex-btn" data-sex="female" id="btn-sex-female">–ñ–µ–Ω.</button>
        </div>

        <div class="modal-input-wrapper" id="modal-input-wrapper" style="display:none;">
          <input class="modal-input" id="modal-input" />
        </div>

        <div class="modal-actions">
          <button class="btn btn-secondary" id="modal-cancel">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn btn-primary" id="modal-ok">OK</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let state = {
      sex: null,
      age: null,
      bodyWeight: null,
      goalWeight: null,
      currentWeight: null
    };

    const GRAPH_MIN = 30;
    const GRAPH_MAX = 180;
    const GRAPH_HEIGHT = 190;
    const ICON_OFFSET_ABOVE = 10;

    const chipSex = document.getElementById('chip-sex');
    const chipAge = document.getElementById('chip-age');
    const chipWeight = document.getElementById('chip-weight');

    const graphWrapper = document.getElementById('graph-wrapper');
    const markerPerson = document.getElementById('marker-person');
    const markerFlag = document.getElementById('marker-flag');

    const goalValue = document.getElementById('goal-value');
    const goalBar = document.getElementById('goal-bar');
    const goalBarInner = document.getElementById('goal-bar-inner');
    const goalBarLabel = document.getElementById('goal-bar-label');
    const goalBarFlag = document.getElementById('goal-bar-flag');

    const modalBackdrop = document.getElementById('modal-backdrop');
    const modalTitle = document.getElementById('modal-title');
    const modalDescription = document.getElementById('modal-description');
    const modalInputWrapper = document.getElementById('modal-input-wrapper');
    const modalInput = document.getElementById('modal-input');
    const modalSexRow = document.getElementById('modal-sex-row');
    const modalCancel = document.getElementById('modal-cancel');
    const modalOk = document.getElementById('modal-ok');
    const btnSexMale = document.getElementById('btn-sex-male');
    const btnSexFemale = document.getElementById('btn-sex-female');

    let currentModal = null;
    let selectedSex = null;

    function clamp(val, min, max) {
      return Math.min(Math.max(val, min), max);
    }

    function mapWeightToX(weight) {
      const clamped = clamp(weight, GRAPH_MIN, GRAPH_MAX);
      const rel = (clamped - GRAPH_MIN) / (GRAPH_MAX - GRAPH_MIN);
      return 5 + rel * 90;
    }

    function curveYAtWeight(weight) {
      const clamped = clamp(weight, GRAPH_MIN, GRAPH_MAX);
      const t = (clamped - GRAPH_MIN) / (GRAPH_MAX - GRAPH_MIN);
      const base = 150 - 80 * Math.sin(Math.PI * t);
      return base;
    }

    function updateGraphVisibility() {
      const ready = !!(state.sex && state.age && state.bodyWeight);
      graphWrapper.classList.toggle('hidden', !ready);
    }

    function updateChips() {
      if (state.sex) {
        chipSex.textContent = state.sex === 'male' ? '–ú—É–∂.' : '–ñ–µ–Ω.';
        chipSex.classList.add('chip--active');
      } else {
        chipSex.textContent = '–ü–æ–ª';
        chipSex.classList.remove('chip--active');
      }

      if (state.age) {
        chipAge.textContent = state.age + ' –ª–µ—Ç';
        chipAge.classList.add('chip--active');
      } else {
        chipAge.textContent = '–í–æ–∑—Ä–∞—Å—Ç';
        chipAge.classList.remove('chip--active');
      }

      if (state.bodyWeight) {
        chipWeight.textContent = state.bodyWeight + ' –∫–≥';
        chipWeight.classList.add('chip--active');
      } else {
        chipWeight.textContent = '–í–µ—Å —Ç–µ–ª–∞';
        chipWeight.classList.remove('chip--active');
      }
    }

    function updateGoalArea() {
      if (state.goalWeight) {
        goalValue.innerHTML = state.goalWeight.toFixed(1) + '<span>kg</span>';
      } else {
        goalValue.innerHTML = '--<span>kg</span>';
      }

      if (state.currentWeight && state.goalWeight) {
        const percent = clamp((state.currentWeight / state.goalWeight) * 100, 0, 100);
        goalBarInner.style.width = percent + '%';
        goalBarLabel.textContent = state.currentWeight.toFixed(1) + 'kg';
        goalBarLabel.style.display = 'block';
        goalBarFlag.style.display = 'flex';
      } else {
        goalBarInner.style.width = '0%';
        goalBarLabel.textContent = '--kg';
        goalBarLabel.style.display = 'none';
        goalBarFlag.style.display = 'none';
      }
    }

    function updateGraphMarkers() {
      const graphVisible = !graphWrapper.classList.contains('hidden');

      if (graphVisible && state.currentWeight) {
        const x = mapWeightToX(state.currentWeight);
        const y = curveYAtWeight(state.currentWeight);
        const bottomPx = GRAPH_HEIGHT - y + ICON_OFFSET_ABOVE;
        markerPerson.style.left = x + '%';
        markerPerson.style.bottom = bottomPx + 'px';
        markerPerson.style.display = 'block';
      } else {
        markerPerson.style.display = 'none';
      }

      if (graphVisible && state.goalWeight) {
        const x = mapWeightToX(state.goalWeight);
        const y = curveYAtWeight(state.goalWeight);
        const bottomPx = GRAPH_HEIGHT - y + ICON_OFFSET_ABOVE;
        markerFlag.style.left = x + '%';
        markerFlag.style.bottom = bottomPx + 'px';
        markerFlag.style.display = 'block';
      } else {
        markerFlag.style.display = 'none';
      }
    }

    function redraw() {
      updateChips();
      updateGraphVisibility();
      updateGoalArea();
      updateGraphMarkers();
    }

    function openModal(type) {
      currentModal = type;
      modalInput.value = '';
      modalInputWrapper.style.display = 'none';
      modalSexRow.style.display = 'none';
      modalOk.style.display = 'inline-block';

      if (type === 'sex') {
        modalTitle.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª';
        modalDescription.textContent = '–≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á—ë—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.';
        modalSexRow.style.display = 'flex';
        selectedSex = state.sex || 'male';
        updateSexButtons();
        modalOk.style.display = 'none';
      } else if (type === 'age') {
        modalTitle.textContent = '–í–æ–∑—Ä–∞—Å—Ç';
        modalDescription.textContent = '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç –≤ –ø–æ–ª–Ω—ã—Ö –≥–æ–¥–∞—Ö.';
        modalInputWrapper.style.display = 'block';
        modalInput.type = 'number';
        modalInput.min = '1';
        modalInput.max = '120';
        modalInput.step = '1';
        modalInput.placeholder = '–ù–∞–ø—Ä–∏–º–µ—Ä, 24';
        if (state.age) modalInput.value = state.age;
      } else if (type === 'body') {
        modalTitle.textContent = '–í–µ—Å —Ç–µ–ª–∞';
        modalDescription.textContent = '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π –≤–µ—Å —Ç–µ–ª–∞ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö.';
        modalInputWrapper.style.display = 'block';
        modalInput.type = 'number';
        modalInput.min = '1';
        modalInput.max = '400';
        modalInput.step = '0.5';
        modalInput.placeholder = '–ù–∞–ø—Ä–∏–º–µ—Ä, 85';
        if (state.bodyWeight) modalInput.value = state.bodyWeight;
      } else if (type === 'goal') {
        modalTitle.textContent = '–¶–µ–ª—å (–º–∞–∫—Å. –≤–µ—Å)';
        modalDescription.textContent = '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–µ–≤–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–∏.';
        modalInputWrapper.style.display = 'block';
        modalInput.type = 'number';
        modalInput.min = '1';
        modalInput.max = '400';
        modalInput.step = '0.5';
        modalInput.placeholder = '–ù–∞–ø—Ä–∏–º–µ—Ä, 100';
        if (state.goalWeight) modalInput.value = state.goalWeight;
      } else if (type === 'current') {
        modalTitle.textContent = '–†–∞–±–æ—á–∏–π –≤–µ—Å';
        modalDescription.textContent = '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—á–∏–π –≤–µ—Å –Ω–∞ —ç—Ç–æ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–∏.';
        modalInputWrapper.style.display = 'block';
        modalInput.type = 'number';
        modalInput.min = '1';
        modalInput.max = '400';
        modalInput.step = '0.5';
        modalInput.placeholder = '–ù–∞–ø—Ä–∏–º–µ—Ä, 90';
        if (state.currentWeight) modalInput.value = state.currentWeight;
      }

      modalBackdrop.classList.remove('hidden');
      if (modalInputWrapper.style.display !== 'none') {
        setTimeout(() => modalInput.focus(), 10);
      }
    }

    function closeModal() {
      modalBackdrop.classList.add('hidden');
      currentModal = null;
    }

    function updateSexButtons() {
      btnSexMale.classList.toggle('modal-sex-btn--active', selectedSex === 'male');
      btnSexFemale.classList.toggle('modal-sex-btn--active', selectedSex === 'female');
    }

    chipSex.addEventListener('click', () => openModal('sex'));
    chipAge.addEventListener('click', () => openModal('age'));
    chipWeight.addEventListener('click', () => openModal('body'));
    goalValue.addEventListener('click', () => openModal('goal'));
    goalBar.addEventListener('click', () => openModal('current'));

    btnSexMale.addEventListener('click', () => {
      selectedSex = 'male';
      state.sex = 'male';
      redraw();
      closeModal();
    });

    btnSexFemale.addEventListener('click', () => {
      selectedSex = 'female';
      state.sex = 'female';
      redraw();
      closeModal();
    });

    modalCancel.addEventListener('click', closeModal);

    modalOk.addEventListener('click', () => {
      if (!currentModal) return;
      const raw = modalInput.value.trim();
      if (!raw) {
        closeModal();
        return;
      }
      const value = parseFloat(raw.replace(',', '.'));
      if (isNaN(value)) {
        closeModal();
        return;
      }

      if (currentModal === 'age') {
        if (value > 0 && value < 120) state.age = Math.round(value);
      } else if (currentModal === 'body') {
        if (value > 0 && value < 400) state.bodyWeight = value;
      } else if (currentModal === 'goal') {
        if (value > 0 && value < 400) state.goalWeight = value;
      } else if (currentModal === 'current') {
        if (value > 0 && value < 400) state.currentWeight = value;
      }

      redraw();
      closeModal();
    });

    modalBackdrop.addEventListener('click', e => {
      if (e.target === modalBackdrop) closeModal();
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') closeModal();
      if (e.key === 'Enter' && !modalBackdrop.classList.contains('hidden')) {
        if (currentModal && currentModal !== 'sex') modalOk.click();
      }
    });

    redraw();
  </script>
</body>
</html>
